{"ast":null,"code":"import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport { firebaseConfig } from './config';\nfirebase.initializeApp(firebaseConfig);\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\nconst GoogleProvider = new firebase.auth.GoogleAuthProvider();\nGoogleProvider.setCustomParameters({\n  prompt: 'select_account'\n});\nexport const signInWithGoogle = () => auth.signInWithPopup(GoogleProvider);\nexport const handleUserProfile = async (userAuth, additionalData) => {\n  if (!userAuth) return;\n  const {\n    uid\n  } = userAuth;\n  const userRef = firestore.doc(`users/${uid}`);\n  const snapShot = await userRef.get();\n\n  if (!snapShot.exists) {\n    const {\n      displayName,\n      email\n    } = userAuth;\n    const timestamp = new Date();\n\n    try {\n      await userRef({\n        displayName,\n        email,\n        createdDate: timestamp,\n        ...additionalData\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  return userRef;\n};","map":{"version":3,"sources":["/Users/elviocali/Sites/ecommerce/src/firebase/utils.js"],"names":["firebase","firebaseConfig","initializeApp","auth","firestore","GoogleProvider","GoogleAuthProvider","setCustomParameters","prompt","signInWithGoogle","signInWithPopup","handleUserProfile","userAuth","additionalData","uid","userRef","doc","snapShot","get","exists","displayName","email","timestamp","Date","createdDate","err","console","log"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,oBAAP;AACA,OAAO,eAAP;AACA,SAAQC,cAAR,QAA6B,UAA7B;AAEAD,QAAQ,CAACE,aAAT,CAAuBD,cAAvB;AAEA,OAAO,MAAME,IAAI,GAAGH,QAAQ,CAACG,IAAT,EAAb;AACP,OAAO,MAAMC,SAAS,GAAGJ,QAAQ,CAACI,SAAT,EAAlB;AAEP,MAAMC,cAAc,GAAG,IAAIL,QAAQ,CAACG,IAAT,CAAcG,kBAAlB,EAAvB;AACAD,cAAc,CAACE,mBAAf,CAAmC;AAACC,EAAAA,MAAM,EAAE;AAAT,CAAnC;AACA,OAAO,MAAMC,gBAAgB,GAAG,MAAMN,IAAI,CAACO,eAAL,CAAqBL,cAArB,CAA/B;AAEP,OAAO,MAAMM,iBAAiB,GAAG,OAAMC,QAAN,EAAgBC,cAAhB,KAAkC;AAC/D,MAAG,CAACD,QAAJ,EAAc;AACd,QAAM;AAACE,IAAAA;AAAD,MAAQF,QAAd;AACA,QAAMG,OAAO,GAAGX,SAAS,CAACY,GAAV,CAAe,SAAQF,GAAI,EAA3B,CAAhB;AACA,QAAMG,QAAQ,GAAG,MAAMF,OAAO,CAACG,GAAR,EAAvB;;AACA,MAAG,CAACD,QAAQ,CAACE,MAAb,EAAoB;AAChB,UAAM;AAACC,MAAAA,WAAD;AAAcC,MAAAA;AAAd,QAAuBT,QAA7B;AACA,UAAMU,SAAS,GAAG,IAAIC,IAAJ,EAAlB;;AACA,QAAG;AACC,YAAMR,OAAO,CAAC;AACVK,QAAAA,WADU;AAEVC,QAAAA,KAFU;AAGVG,QAAAA,WAAW,EAAGF,SAHJ;AAIV,WAAGT;AAJO,OAAD,CAAb;AAMH,KAPD,CAOC,OAAMY,GAAN,EAAU;AACPC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH;AACJ;;AACD,SAAOV,OAAP;AACH,CApBM","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/firestore'\nimport 'firebase/auth'\nimport {firebaseConfig} from './config';\n\nfirebase.initializeApp(firebaseConfig)\n\nexport const auth = firebase.auth()\nexport const firestore = firebase.firestore()\n\nconst GoogleProvider = new firebase.auth.GoogleAuthProvider()\nGoogleProvider.setCustomParameters({prompt: 'select_account'})\nexport const signInWithGoogle = () => auth.signInWithPopup(GoogleProvider)\n\nexport const handleUserProfile = async(userAuth, additionalData) =>{\n    if(!userAuth) return;\n    const {uid} = userAuth\n    const userRef = firestore.doc(`users/${uid}`)\n    const snapShot = await userRef.get()\n    if(!snapShot.exists){\n        const {displayName, email} = userAuth\n        const timestamp = new Date()\n        try{\n            await userRef({\n                displayName,\n                email,\n                createdDate : timestamp,\n                ...additionalData\n            })\n        }catch(err){\n            console.log(err)\n        }\n    }\n    return userRef;\n}"]},"metadata":{},"sourceType":"module"}